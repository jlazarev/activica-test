!function(){"use strict";const e=document.querySelector("body"),t=()=>{e.removeAttribute("style"),e.classList.remove("scroll-lock"),window.scrollTo(0,+e.dataset.scrollY)},o=(e,o,n)=>{e.classList.remove("modal--active"),o&&o(),n||setTimeout(t,300)},n=(t,n,r,c,a,s)=>{r&&r.forEach((o=>{o.addEventListener("click",(o=>{a||o.preventDefault(),((t,o,n)=>{t.classList.add("modal--active"),o&&o(),n||(t=>{if(!t){const t=(()=>{const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",e.appendChild(t);const o=document.createElement("div");t.appendChild(o);const n=t.offsetWidth-o.offsetWidth;if(t.parentNode.removeChild(t),e.offsetHeight>window.innerHeight)return n})();e.setAttribute("style",`padding-right: ${t}px;`)}e.dataset.scrollY=`${self.pageYOffset||document.documentElement&&document.documentElement.ScrollTop||e&&e.scrollTop}`,e.style.top=`-${e.dataset.scrollY}px`,e.classList.add("scroll-lock")})()})(t,c,s)}))})),((e,t,n)=>{const r=e.querySelector(".modal__overlay");e.querySelector(".modal__close-btn").addEventListener("click",(()=>{o(e,t,n)})),r.addEventListener("click",(()=>{o(e,t,n)})),document.addEventListener("keydown",(n=>{((e,t,n)=>{("Escape"===e.key||"Esc"===e.key)&&t.classList.contains("modal--active")&&(e.preventDefault(),o(t,n))})(n,e,t)}))})(t,n,s)},r=document.querySelectorAll(".modal"),c=document.querySelector(".modal--feedback"),a=document.querySelectorAll('[data-modal="feedback"]'),s=document.querySelector(".modal--success"),l=document.querySelectorAll('[data-modal="success"]'),i=document.querySelector(".header"),d=i.querySelector(".header__menu-btn"),u=i.querySelector(".header__menu"),p=i.querySelectorAll(".header__menu-link"),m=document.querySelector(".page-body");p.forEach((e=>{e.addEventListener("click",(function(){u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close"),m.classList.remove("page-body--no-scroll")}))})),d.addEventListener("click",(function(){u.classList.contains("header__menu--open")?(u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close"),m.classList.remove("page-body--no-scroll")):(u.classList.add("header__menu--open"),d.classList.add("header__menu-btn--open"),d.classList.remove("header__menu-btn--close"),m.classList.add("page-body--no-scroll"))})),window.addEventListener("click",(function(e){e.target===u||e.target===d||i.contains(e.target)||(u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close"),m.classList.remove("page-body--no-scroll"))})),u.addEventListener("click",(function(e){e.stopPropagation()}));const f=document.querySelectorAll(".link-popup"),h=document.querySelector(".popup"),y=document.querySelector(".page-body"),v=document.querySelector(".header__menu-btn"),E=document.querySelector(".header__menu");let g;if(h){const V=h.querySelector(".popup__wrapper--form"),X=h.querySelector(".popup__wrapper--success"),J=h.querySelectorAll(".popup__close-btn"),K=h.querySelector(".perso-link"),Z=h.querySelector(".popup__wrapper--perso"),ee=h.querySelector(".back-btn");function te(){h.classList.remove("popup--open"),h.classList.add("popup--close"),y.classList.remove("page-body--no-scroll"),g.classList.remove("grecaptcha-badge--active"),setTimeout((()=>{V.classList.remove("hide"),V.classList.remove("_error"),X.classList.remove("show"),Z.classList.remove("show")}),800)}K.addEventListener("click",(function(e){e.preventDefault(),V.classList.add("hide"),Z.classList.add("show")})),ee.addEventListener("click",(function(e){e.preventDefault(),V.classList.remove("hide"),Z.classList.remove("show")})),f.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),h.classList.add("popup--open"),h.classList.remove("popup--close"),y.classList.add("page-body--no-scroll"),E.classList.remove("header__menu--open"),v.classList.remove("header__menu-btn--open"),v.classList.add("header__menu-btn--close"),g=document.querySelector(".grecaptcha-badge"),g.classList.add("grecaptcha-badge--active")}))})),J.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),te()}))})),window.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||h.classList.contains("popup--open")&&(e.preventDefault(),te())})),h.addEventListener("click",(function(e){e.target!==V&&e.target!==X&&te()})),V.addEventListener("click",(function(e){e.stopPropagation()})),X.addEventListener("click",(function(e){e.stopPropagation()})),Z.addEventListener("click",(function(e){e.stopPropagation()}))}const w=document.querySelector(".partners__tabs-swiper"),L=["Авто","Недвижимость","ЖКХ","Госуслуги"];w&&new Swiper(".partners__tabs-swiper",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+L[e]+"</span>"}},autoHeight:!0,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1}),document.querySelector(".examples__swiper")&&new Swiper(".examples__swiper",{loop:!0,autoHeight:!0,effect:"fade",fadeEffect:{crossFade:!0},speed:1e3,allowTouchMove:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});const b=document.querySelectorAll(".connection__item"),S=e=>{const t=e.getBoundingClientRect();return window.scrollY+t.y+t.height/2};function _(){b.forEach(((e,t,o)=>{const n=e.querySelector(".arrow");if(n)if(document.documentElement.clientWidth>979){const r=S(e),c=S(o[t+1])-r-66;n.style.height=c+"px"}else n.style.height="calc(100% - 61px)"}))}_(),window.addEventListener("resize",_);const q=document.querySelector(".popup__form"),k=q.querySelectorAll(".input-box");k.forEach((e=>{const t=e.querySelector('[id^="input"]'),o=e.querySelector(".placeholder");t.addEventListener("change",(()=>{""===t.value?o.classList.remove("placeholder--active"):o.classList.add("placeholder--active")}))}));const x=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,A=/^\+7 [0-9][0-9][0-9] [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]$/iu,C=document.querySelector(".popup"),D=C.querySelector(".popup__wrapper--form"),M=C.querySelector(".popup__wrapper--success");function N(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function P(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function T(e,t){return t.test(e)}q.addEventListener("submit",(async function(e){if(e.preventDefault(),D.classList.remove("_error"),0!==function(){let e=0;return k.forEach((t=>{const o=t.querySelector('[id^="input"]'),n=t.querySelector(".error-message");switch(P(o),o.id){case"input-email":""===o.value?(N(o),n.textContent="Заполните поле",e++):T(o.value,x)||(N(o),n.textContent="Поле заполнено неверно",e++),o.addEventListener("blur",(()=>{I(o,x),""===o.value&&(N(o),n.textContent="Заполните поле")}));break;case"input-tel":""===o.value?(N(o),n.textContent="Заполните поле",e++):T(o.value,A)||(N(o),n.textContent="Поле заполнено неверно",e++),o.addEventListener("blur",(()=>{I(o,A),""===o.value&&(N(o),n.textContent="Заполните поле")}));break;default:""===o.value&&(N(o),e++),o.addEventListener("blur",(()=>{!function(e){""!==e.value?P(e):N(e)}(o)}))}})),e}())return;const t=new FormData(q);grecaptcha.ready((function(){grecaptcha.execute("6LeuUcsoAAAAALIjo1cUSFVp8Q39WjFbHzhobIoN",{action:"submit"}).then((async function(e){D.classList.add("_sending"),t.append("g-recaptcha-response",e);let o=await fetch("https://kazna.tprs.ru/form",{method:"POST",body:t}),n=await o.json();o.ok&&n.status?(q.reset(),k.forEach((e=>{e.querySelector(".placeholder").classList.remove("placeholder--active")})),D.classList.remove("_sending"),D.classList.add("hide"),M.classList.add("show")):(D.classList.remove("_sending"),D.classList.add("_error"))}))}))}));const O=q.querySelector("#input-tel"),B=q.querySelector("#input-email");function I(e,t){""===e.value||T(e.value,t)?P(e):(N(e),e.parentElement.querySelector(".error-message").textContent="Поле заполнено неверно")}O.addEventListener("blur",(()=>{I(O,A)})),B.addEventListener("blur",(()=>{I(B,x)})),IMask(document.getElementById("input-tel"),{mask:"+{7} 000 000-00-00"});const U=document.querySelectorAll(".info-autos"),j=document.querySelectorAll(".info-realty"),F=document.querySelectorAll(".info-autos-pic"),H=document.querySelectorAll(".info-realty-pic"),$=(e,t)=>{e.addEventListener("mouseover",(()=>{t.forEach((e=>{e.classList.add("info-pic-active")}))})),e.addEventListener("mouseout",(()=>{t.forEach((e=>{e.classList.remove("info-pic-active")}))}))};U.forEach((e=>{$(e,F)})),j.forEach((e=>{$(e,H)}));const z=document.querySelectorAll(".pNumber");var W=window.btoa("tel:88002003346"),Y=window.atob(W);for(let oe of z)oe.addEventListener("click",(function(e){e.preventDefault(),window.location.href=Y}));const R=document.getElementById("range-slider-price");if(R){noUiSlider.create(R,{start:35e4,connect:"lower",step:1e4,range:{min:35e4,max:3e6},format:wNumb({decimals:0,thousand:" ",suffix:" ₽"})});const ne=document.getElementById("input-price");R.noUiSlider.on("update",(function(e,t){ne.value=e[t]})),ne.addEventListener("change",(function(){R.noUiSlider.set(this.value)}))}const G=document.getElementById("range-slider-month");if(G){noUiSlider.create(G,{start:1,connect:"lower",step:1,range:{min:1,max:36},format:wNumb({decimals:0,thousand:"",suffix:" месяц"})});const re=document.getElementById("input-month");G.noUiSlider.on("update",(function(e,t){re.value=e[t]})),re.addEventListener("change",(function(){G.noUiSlider.set(this.value)}))}const Q=document.getElementById("range-slider-payment");if(Q){noUiSlider.create(Q,{start:5e4,connect:"lower",step:1e4,range:{min:5e4,max:2e5},format:wNumb({decimals:0,thousand:" ",suffix:" ₽"})});const ce=document.getElementById("input-payment");Q.noUiSlider.on("update",(function(e,t){ce.value=e[t]})),ce.addEventListener("change",(function(){Q.noUiSlider.set(this.value)}))}(()=>{if(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(let o=0;o<this.length;o++)e.call(t,this[o],o,this)}),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}(),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return!1;for(var r,c,a=0|t,s=Math.max(a>=0?a:n-Math.abs(a),0);s<n;){if((r=o[s])===(c=e)||"number"==typeof r&&"number"==typeof c&&isNaN(r)&&isNaN(c))return!0;s++}return!1}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){let t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;for(;--o>=0&&t.item(o)!==this;);return o>-1}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.appendChild(t)}})})),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this)}})})),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value(e,t){let o=t>0?0|t:0;return this.substring(o,o+e.length)===e}}),window.navigator.msSaveBlob){const e=document.querySelectorAll("a[download]");e.length&&e.forEach((e=>{(e=>{if(""===e.href)throw Error("The element has no href value.");let t=e.getAttribute("download");if(null===t||""===t){const o=e.href.split("/");t=o[o.length-1]}e.addEventListener("click",(o=>{o.preventDefault();const n=new XMLHttpRequest;n.onloadstart=()=>{n.responseType="blob"},n.onload=()=>{navigator.msSaveOrOpenBlob(n.response,t)},n.open("GET",e.href,!0),n.send()}))})(e)}))}window.MSInputMethodContext&&document.documentMode&&document.querySelectorAll("svg").forEach((e=>{e.setAttribute("focusable","false")})),(()=>{const e=document.querySelector("main"),t=document.querySelector(".header"),o=document.querySelector(".footer");let n,r,c;if(!e||!window.MSInputMethodContext||!document.documentMode)return;const a=()=>{n=t?t.getBoundingClientRect().height:0,r=o?o.getBoundingClientRect().height:0,c=window.innerHeight,e.style.minHeight=c-(n+r)+"px"};document.addEventListener("loadDOMContentLoaded",a()),window.addEventListener("resize",a)})()})(),(()=>{if((!window.MSInputMethodContext||!document.documentMode)&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${e}px`)}))}})(),window.addEventListener("load",(()=>{r.length&&r.forEach((e=>{setTimeout((()=>{e.classList.remove("modal--preload")}),100)}))})),c&&a.length&&n(c,!1,a,!1,!1),s&&l.length&&n(s,!1,l)}();