!function(){"use strict";const e=document.querySelector("body"),t=()=>{e.removeAttribute("style"),e.classList.remove("scroll-lock"),window.scrollTo(0,+e.dataset.scrollY)},o=(e,o,n)=>{e.classList.remove("modal--active"),o&&o(),n||setTimeout(t,300)},n=(t,n,r,c,a,s)=>{r&&r.forEach((o=>{o.addEventListener("click",(o=>{a||o.preventDefault(),((t,o,n)=>{t.classList.add("modal--active"),o&&o(),n||(t=>{if(!t){const t=(()=>{const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",e.appendChild(t);const o=document.createElement("div");t.appendChild(o);const n=t.offsetWidth-o.offsetWidth;if(t.parentNode.removeChild(t),e.offsetHeight>window.innerHeight)return n})();e.setAttribute("style",`padding-right: ${t}px;`)}e.dataset.scrollY=`${self.pageYOffset||document.documentElement&&document.documentElement.ScrollTop||e&&e.scrollTop}`,e.style.top=`-${e.dataset.scrollY}px`,e.classList.add("scroll-lock")})()})(t,c,s)}))})),((e,t,n)=>{const r=e.querySelector(".modal__overlay");e.querySelector(".modal__close-btn").addEventListener("click",(()=>{o(e,t,n)})),r.addEventListener("click",(()=>{o(e,t,n)})),document.addEventListener("keydown",(n=>{((e,t,n)=>{("Escape"===e.key||"Esc"===e.key)&&t.classList.contains("modal--active")&&(e.preventDefault(),o(t,n))})(n,e,t)}))})(t,n,s)},r=document.querySelectorAll(".modal"),c=document.querySelector(".modal--feedback"),a=document.querySelectorAll('[data-modal="feedback"]'),s=document.querySelector(".modal--success"),l=document.querySelectorAll('[data-modal="success"]'),i=document.querySelector(".header"),d=i.querySelector(".header__menu-btn"),u=i.querySelector(".header__menu");i.querySelectorAll(".header__menu-link").forEach((e=>{e.addEventListener("click",(function(){u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close")}))})),d.addEventListener("click",(function(){u.classList.contains("header__menu--open")?(u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close")):(u.classList.add("header__menu--open"),d.classList.add("header__menu-btn--open"),d.classList.remove("header__menu-btn--close"))})),window.addEventListener("click",(function(e){e.target===u||e.target===d||i.contains(e.target)||(u.classList.remove("header__menu--open"),d.classList.remove("header__menu-btn--open"),d.classList.add("header__menu-btn--close"))})),u.addEventListener("click",(function(e){e.stopPropagation()}));const p=document.querySelectorAll(".link-popup"),m=document.querySelector(".popup"),h=document.querySelector(".page-body"),f=document.querySelector(".header__menu-btn"),y=document.querySelector(".header__menu");let v;if(m){const Y=m.querySelector(".popup__wrapper--form"),R=m.querySelector(".popup__wrapper--success"),U=m.querySelectorAll(".popup__close-btn"),G=m.querySelector(".perso-link"),Q=m.querySelector(".popup__wrapper--perso"),V=m.querySelector(".back-btn");function X(){m.classList.remove("popup--open"),m.classList.add("popup--close"),h.classList.remove("page-body--no-scroll"),v.classList.remove("grecaptcha-badge--active"),setTimeout((()=>{Y.classList.remove("hide"),Y.classList.remove("_error"),R.classList.remove("show"),Q.classList.remove("show")}),800)}G.addEventListener("click",(function(e){e.preventDefault(),Y.classList.add("hide"),Q.classList.add("show")})),V.addEventListener("click",(function(e){e.preventDefault(),Y.classList.remove("hide"),Q.classList.remove("show")})),p.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),m.classList.add("popup--open"),m.classList.remove("popup--close"),h.classList.add("page-body--no-scroll"),y.classList.remove("header__menu--open"),f.classList.remove("header__menu-btn--open"),f.classList.add("header__menu-btn--close"),v=document.querySelector(".grecaptcha-badge"),v.classList.add("grecaptcha-badge--active")}))})),U.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),X()}))})),window.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||m.classList.contains("popup--open")&&(e.preventDefault(),X())})),m.addEventListener("click",(function(e){e.target!==Y&&e.target!==R&&X()})),Y.addEventListener("click",(function(e){e.stopPropagation()})),R.addEventListener("click",(function(e){e.stopPropagation()})),Q.addEventListener("click",(function(e){e.stopPropagation()}))}document.querySelector(".advantages__swiper")&&new Swiper(".advantages__swiper",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:12e3,disableOnInteraction:!0}}),document.querySelector(".payments__block-slider")&&new Swiper(".payments__block-slider",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:6e3,disableOnInteraction:!0}});const w=document.querySelector(".partners__tabs-swiper"),E=["Авто","Недвижимость","ЖКХ","Госуслуги"];w&&new Swiper(".partners__tabs-swiper",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+E[e]+"</span>"}},autoHeight:!0,effect:"fade",fadeEffect:{crossFade:!0},allowTouchMove:!1});const g=document.querySelectorAll(".connection__item"),b=e=>{const t=e.getBoundingClientRect();return window.scrollY+t.y+t.height/2};function L(){g.forEach(((e,t,o)=>{const n=e.querySelector(".arrow");if(n)if(document.documentElement.clientWidth>979){const r=b(e),c=b(o[t+1])-r-66;n.style.height=c+"px"}else n.style.height="calc(100% - 61px)"}))}L(),window.addEventListener("resize",L),new Masonry(".grid",{columnWidth:".grid-sizer",itemSelector:".grid-item",percentPosition:!0,gutter:".gutter-sizer",transitionDuration:0});const _=document.querySelector(".popup__form"),S=_.querySelectorAll(".input-box");S.forEach((e=>{const t=e.querySelector('[id^="input"]'),o=e.querySelector(".placeholder");t.addEventListener("change",(()=>{""===t.value?o.classList.remove("placeholder--active"):o.classList.add("placeholder--active")}))}));const q=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,k=/^\+7 [0-9][0-9][0-9] [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]$/iu,A=document.querySelector(".popup"),C=A.querySelector(".popup__wrapper--form"),D=A.querySelector(".popup__wrapper--success");function x(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function P(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function M(e,t){return t.test(e)}_.addEventListener("submit",(async function(e){if(e.preventDefault(),C.classList.remove("_error"),0!==function(){let e=0;return S.forEach((t=>{const o=t.querySelector('[id^="input"]'),n=t.querySelector(".error-message");switch(P(o),o.id){case"input-email":""===o.value?(x(o),n.textContent="Заполните поле",e++):M(o.value,q)||(x(o),n.textContent="Поле заполнено неверно",e++),o.addEventListener("blur",(()=>{O(o,q),""===o.value&&(x(o),n.textContent="Заполните поле")}));break;case"input-tel":""===o.value?(x(o),n.textContent="Заполните поле",e++):M(o.value,k)||(x(o),n.textContent="Поле заполнено неверно",e++),o.addEventListener("blur",(()=>{O(o,k),""===o.value&&(x(o),n.textContent="Заполните поле")}));break;default:""===o.value&&(x(o),e++),o.addEventListener("blur",(()=>{!function(e){""!==e.value?P(e):x(e)}(o)}))}})),e}())return;const t=new FormData(_);grecaptcha.ready((function(){grecaptcha.execute("6LeuUcsoAAAAALIjo1cUSFVp8Q39WjFbHzhobIoN",{action:"submit"}).then((async function(e){C.classList.add("_sending"),t.append("g-recaptcha-response",e);let o=await fetch("https://kazna.tprs.ru/form",{method:"POST",body:t}),n=await o.json();o.ok&&n.status?(_.reset(),S.forEach((e=>{e.querySelector(".placeholder").classList.remove("placeholder--active")})),C.classList.remove("_sending"),C.classList.add("hide"),D.classList.add("show")):(C.classList.remove("_sending"),C.classList.add("_error"))}))}))}));const N=_.querySelector("#input-tel"),T=_.querySelector("#input-email");function O(e,t){""===e.value||M(e.value,t)?P(e):(x(e),e.parentElement.querySelector(".error-message").textContent="Поле заполнено неверно")}N.addEventListener("blur",(()=>{O(N,k)})),T.addEventListener("blur",(()=>{O(T,q)})),IMask(document.getElementById("input-tel"),{mask:"+{7} 000 000-00-00"});const B=document.querySelectorAll(".info-autos"),j=document.querySelectorAll(".info-realty"),F=document.querySelectorAll(".info-autos-pic"),H=document.querySelectorAll(".info-realty-pic"),I=(e,t)=>{e.addEventListener("mouseover",(()=>{t.forEach((e=>{e.classList.add("info-pic-active")}))})),e.addEventListener("mouseout",(()=>{t.forEach((e=>{e.classList.remove("info-pic-active")}))}))};B.forEach((e=>{I(e,F)})),j.forEach((e=>{I(e,H)}));const z=document.querySelectorAll(".pNumber");var W=window.btoa("tel:88002003346"),$=window.atob(W);for(let J of z)J.addEventListener("click",(function(e){e.preventDefault(),window.location.href=$}));!function(e,t,o,n,r,c,a){e[r]=e[r]||function(){(e[r].a=e[r].a||[]).push(arguments)},e[r].l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;c=t.createElement(o),a=t.getElementsByTagName(o)[0],c.async=1,c.src=n,a.parentNode.insertBefore(c,a)}(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym"),ym(95364254,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0}),document.querySelector(".footer__year").textContent=(new Date).getFullYear(),(()=>{if(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(let o=0;o<this.length;o++)e.call(t,this[o],o,this)}),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}(),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return!1;for(var r,c,a=0|t,s=Math.max(a>=0?a:n-Math.abs(a),0);s<n;){if((r=o[s])===(c=e)||"number"==typeof r&&"number"==typeof c&&isNaN(r)&&isNaN(c))return!0;s++}return!1}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){let t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;for(;--o>=0&&t.item(o)!==this;);return o>-1}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.appendChild(t)}})})),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(){let e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){let o=e instanceof Node;t.appendChild(o?e:document.createTextNode(String(e)))})),this.parentNode.insertBefore(t,this)}})})),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value(e,t){let o=t>0?0|t:0;return this.substring(o,o+e.length)===e}}),window.navigator.msSaveBlob){const e=document.querySelectorAll("a[download]");e.length&&e.forEach((e=>{(e=>{if(""===e.href)throw Error("The element has no href value.");let t=e.getAttribute("download");if(null===t||""===t){const o=e.href.split("/");t=o[o.length-1]}e.addEventListener("click",(o=>{o.preventDefault();const n=new XMLHttpRequest;n.onloadstart=()=>{n.responseType="blob"},n.onload=()=>{navigator.msSaveOrOpenBlob(n.response,t)},n.open("GET",e.href,!0),n.send()}))})(e)}))}window.MSInputMethodContext&&document.documentMode&&document.querySelectorAll("svg").forEach((e=>{e.setAttribute("focusable","false")})),(()=>{const e=document.querySelector("main"),t=document.querySelector(".header"),o=document.querySelector(".footer");let n,r,c;if(!e||!window.MSInputMethodContext||!document.documentMode)return;const a=()=>{n=t?t.getBoundingClientRect().height:0,r=o?o.getBoundingClientRect().height:0,c=window.innerHeight,e.style.minHeight=c-(n+r)+"px"};document.addEventListener("loadDOMContentLoaded",a()),window.addEventListener("resize",a)})()})(),(()=>{if((!window.MSInputMethodContext||!document.documentMode)&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh",`${e}px`)}))}})(),window.addEventListener("load",(()=>{r.length&&r.forEach((e=>{setTimeout((()=>{e.classList.remove("modal--preload")}),100)}))})),c&&a.length&&n(c,!1,a,!1,!1),s&&l.length&&n(s,!1,l)}();